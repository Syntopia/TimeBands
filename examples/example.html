<html><body>
<style>
 svg{
        font-family: Helvetica, Arial;
		    -webkit-user-select: none;  /* Chrome all / Safari all */
    -moz-user-select: none;     /* Firefox all */
    -ms-user-select: none;      /* IE 10+ */
    }
</style>
<svg width="1600" height="580" xmlns="http://www.w3.org/2000/svg">
	<g id="svgtop">
	</g>
</svg>

<script src="../source/timebands.js" ></script>
<script src="../source/timebandsparser.js" ></script>

<pre id="text">
Mikael
------
1/2-5/6: test
7/6-17/6: momo

Juno
----
8/9-10/10: teso

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec

Months
------
1/1-31/1: Jan
1/2-28/2: Feb
1/3-31/3: Mar
1/4-30/4: Apr
1/5-31/5: May
1/6-30/6: Jun
1/7-31/7: Jul
1/8-31/8: Aug
1/9-30/9: Sep
1/10-31/10: Oct
1/11-30/11: Nov
1/12-31/12: Dec
</pre>

<script>


var svg = document.getElementsByTagName('svg')[0]; //Get svg element
	
function init() {
	var startDate = new Date(2015,0,1);
	var view = new Viewport(svg);
	var top = svg.getElementById('svgtop');
	console.log(top);
	var monthNames = ["Jan", "Feb", "Mar",
				 "Apr", "May", "Jun", "Jul",
				"Aug", "Sep", "Oct",
				"Nov", "Dec"];
	var mc2 = ["#DEF", "#ACE","#DEF",
				"#CDA", "#EED", "#CDA",
				"#FED", "#EDA", "#FED",
				"#FC9", "#FEC", "#FC9"];
	var mc = ["#FC9", "#FEC", "#FC9",
				"#CDA", "#EED", "#CDA",
				"#FC9", "#FEC", "#FC9",
				"#CDA", "#EED", "#CDA"];
	
	var tb = new TimeBand(svg,2015,0);
	var style = new TextBoxStyle();
	
	var months = [];
	var lastMonth = -1;
	var days = new Band(tb,13);
	style.fontSize=10;
	for (var x = 0; x < 365; x++) {
		var d = new Date(tb.startYear,tb.startMonth,x+1) ;
		if (d.getMonth()!=lastMonth) {
			months.push(x);
			lastMonth = d.getMonth();
		}
		days.add(x,x+1, d.getDate(), style, d+"");
	}
	months.push(365);
			
	style.fontSize=18;
	
	var weeks = new Band(tb);
	for (var x = 0; x < 52; x++) {
		style.bgfill = (x % 2 == 1) ? "none" : "#eee";
		style.textFill = (x % 2 == 0) ? "#fff" : "#fff";
		weeks.add(x*7, x*7+7, ""+(x+1), style);
	}
	
	var monthsBand = new Band(tb);
	for (var i = 0; i < months.length-1; i++) {
		var x = months[i];
		var x2 = months[i+1];
		var d = new Date(tb.startYear,tb.startMonth,x+1) ;
		style.bgfill = mc[d.getMonth()];
		monthsBand.add(x, x2, monthNames[d.getMonth()], style);
	}
	
	var spacing = 7;
	var height = 30;
	
	new Band(tb,spacing); 
	
	var b = new Band(tb,height, "John Doe");
	var ss = new TextBoxStyle();
	ss.fontSize = 30;
	ss.rx = 3;
	ss.ry = 3;
	ss.bgfill = "#eee";
		b.add(10,100, "Implementation", ss);
	b.add(110,200, "ISSUES-32", ss);
	
	new Band(tb,spacing); 
	
	b = new Band(tb,height, "Random Person");
	ss.bgfill = "#ddd";
		b.add(50,80, "Design", ss);
	b.add(150,240, "Arch review", ss);
	
	new Band(tb,spacing); 
	
	b = new Band(tb,height, "Syntopia");
	ss.bgfill = "#eee";
	b.add(30,140, "Test", ss);
	b.add(190,240, "Consolidation", ss);
	
	var t = document.getElementById('text'); 
	var parser = new TimeBandsParser();
	parser.parse(t.innerText);
	for (var i = 0; i < parser.bandSections.length; i++) {
		var bs = parser.bandSections[i];
		new Band(tb,spacing); 
		b = new Band(tb,height, bs.name);
		for (var j = 0; j < bs.entries.length; j++) {
			var e = bs.entries[j];
			var interval = e.getIntervalRelativeToDate(startDate);
			b.add(interval[0],interval[1], e.name, ss);
		}
		
	}
	
	view.scalableElements = tb.scalableElements;
	
}
 
svg.addEventListener("load",function() {
	init();
}, false);


function mix(x,y,a) {
	return x*(1-a)+y*a;
}



</script>

</body></html>